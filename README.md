# Морской бой

* для 2 игроков
* hotseat (на одном экране)
* набор кораблей:
  <br/> один 4-х палубный, два 3-х палубных, три 2-х палубных, четыре однопалубных

### Как играть

Этот раздел содержит информацию о визуальной и игровой части.

#### Элементы окна

* Сетка координат, строчки отмечены сразу для 2 полей
* Поле слева - поле первого игрока
* Поле справа - поле второго игрока
* Кнопка "Turn" - нужна для передачи и принятия хода
* Надпись "чей ход"
* Кнопка "Restart" - запускает игру заново

#### Стадия расстановки

В эту стадию игроки расставляют свои корабли на СВОЕМ поле. <br/>
Сначала расставляется первый игрок, затем второй. <br/>
Чтобы задать расстановку своих кораблей, нажимайте на клетки своего поля - они будут перекрашиваться в корабли или
обратно в обычные клетки. <br/>
Закончив расстанавливать корабли, нажмите кнопку "Turn", чтобы передать ход противнику. Если ваша расстановка
некорректна, программа предупредит вас об этом.

#### Игровая стадия

После того как второй игрок закончит расстановку и передаст ход начнется игровая стадия. Игровая стадия состоит из ходов
игроков по очереди.<br/>
Чтобы сделать ход, нужно:

1) принять ход от противника (нажать кнопку "Turn")
2) атаковать вражеское поле
3) при попадании повторять пункт 2, пока не промахнетесь
4) при промахе передать ход противнику (нажать кнопку "Turn")

Игра заканчивается в тот момент, когда уничтожается последний корабль одного из игроков.

#### Замечание

Так как игра ведется на общем окне, в момент передачи хода все корабли скрываются, чтобы никто не мог подсмотреть
расстановку противника.

### Документация

Этот раздел содержит информацию о коде и структурах

#### Основная идея реализации

Файл MainWindow отвечает за графическую часть и нажатие на кнопки. Он обрабатывает имя нажатой кнопки, делает запрос в
класс Game и выполняет продиктованную им комманду класса Command (специальный класс для передачи таких комманд). <br/>

Класс Game отвечает за контроль хода игры и обработку запросов MainWindow.
<br/>

Класс PersonalTable отвечает за обработку логики игры, хранение текущего состояния полей и всевозможные проверки и
запросы к полям игроков.

#### MainWindow

| Функция         | что делает                                                   |
|-----------------|--------------------------------------------------------------|
| ParseButtonName | принимает имя кнопки, возвращает его же, но в нужном формате |
| ButtonClick     | обработчик нажатия на кнопки, делает запрос в Game           |
| DrawTable       | заполняет wpf grid кнопками и рисует сетку координат         |
| DrawText        | вспомогательня для DrawTable                                 |
| DrawBorders     | рисует внешние границы полей                                 |
| Execute         | выполняет команду, полученную от Game                        |

#### Game

| Функция               | что делает                                     |
|-----------------------|------------------------------------------------|
| Preparation           | заканчивает расстановку игрока                 |
| PlayerEndsTurn        | заканчивает и передает ход                     |
| PlayerStartsTurn      | принимает и начинает ход                       |
| PlayerPreparationStep | обрабатывает нажатия кнопок в фазу расстановки |
| Turn                  | обрабатывает нажатия кнопок в фазу игры        |
| Click                 | определяет какому обработчику посылать запрос  |

#### PersonalTable

| Функция                     | что делает                                                                       |
|-----------------------------|----------------------------------------------------------------------------------|
| MyCell                      | смотрит, что игрок знает про свою клетку                                         |
| EnemyCell                   | смотрит, что игрок знает про чужую клетку                                        |
| PreparationStep             | заполняет поле в фазу расстановки                                                |
| CheckThatPlacementIsCorrect | проверяет, что корабли не стоят вплотную                                         |
| CheckThatShipsAraFine       | проверяет, что кораблей ровно 10 и что они нужных размеров                       |
| SendStrike                  | заполняет информацию по вражескому полю                                          |
| ReceiveStrike               | заполняет информацию при атаке на свое поле                                      |
| CheckShipDestruction        | проверяет, уничтожит ли корабль это попадание (в эту клетку)                     |
| MarkingDestruction          | возвращает какие клетки надо отметить на поле при уничтожении корабля            |
| MarkingOn...                | вспомогательные для MarkingDestruction, идут в разные стороны от заданной клетки |